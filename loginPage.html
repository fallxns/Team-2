<!-- This is an HTML document for a login form -->
<!DOCTYPE html>
<html>
    <head>
        <title>Login</title>
        <!-- Include jQuery library -->
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        
        <!-- Validate email function -->
        <script>
            function validateEmails() {
                // Declare a variable to check if email is found or not
                let found = false;
                
                // Get email and password values
                let email = document.getElementById("email").value;
                let password = document.getElementById("password").value;
                
                // Fetch API endpoint for login with email and password
                fetch(`http://localhost:3000/api/login?email=${email}&password=${password}`)
                    .then(response => {
                        // If response is OK, set found variable to true
                        if (response.ok) {
                            found = true;
                        } 
                        // Else set found variable to false
                        else {
                            found = false;
                        }
                    })
                    .catch(error => {
                        console.error('Error:', error);
                    });
                
                // If found variable is true, return true
                if(found == true){
                    return true;
                }
                // Else show an alert and return false
                else{
                    alert("Invalid Details");
                    return false;
                }  
            }
        </script>
    </head>

    <body>
        <!-- Login form -->
        <form action = "homepage.html" method = "post" onsubmit = "return validateEmails()" id = "login">
            <!-- Email input field -->
            <label class="form-label" for="email">Email Address</label>
            <input class="form-control" type="email" id="email" required>
            
            <!-- Password input field -->
            <label class="form-label" for="password">Password</label>
            <input class="form-control" type="password" id="password" required>

            <!-- Hidden input field to store user information -->
            <input type = "hidden" id = "userInfo" name = "userInfo" value = "">

            <!-- Sign in button -->
            <input type="submit" value="SIGN IN">
        </form>
    </body>
</html>
